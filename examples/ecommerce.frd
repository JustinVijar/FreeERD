title "E-Commerce Database Schema"

// User management
table Users {
  id: int [pk, autoincrement],
  username: str [unique],
  email: str [unique],
  password_hash: str,
  created_at: datetime [default=NOW],
  updated_at: datetime [default=NOW]
}

table UserProfiles {
  id: int [pk, autoincrement],
  user_id: int [fk],
  first_name: str,
  last_name: str,
  phone: str [nullable],
  address: str [nullable]
}

// Product catalog
table Categories {
  id: int [pk, autoincrement],
  name: str [unique],
  description: str [nullable]
}

table Products {
  id: int [pk, autoincrement],
  category_id: int [fk],
  name: str [unique],
  description: str [nullable],
  price: float,
  stock: int [default=0],
  created_at: datetime [default=NOW]
}

// Orders and transactions
table Orders {
  id: int [pk, autoincrement],
  user_id: int [fk],
  order_date: datetime [default=NOW],
  status: str [default="pending"],
  total_amount: float
}

table OrderItems {
  id: int [pk, autoincrement],
  order_id: int [fk],
  product_id: int [fk],
  quantity: int [default=1],
  price: float
}

// Reviews
table Reviews {
  id: int [pk, autoincrement],
  product_id: int [fk],
  user_id: int [fk],
  rating: int,
  comment: str [nullable],
  created_at: datetime [default=NOW]
}

// Relationships
Users.id - UserProfiles.user_id
Categories.id > Products.category_id
Users.id > Orders.user_id
Orders.id > OrderItems.order_id
Products.id > OrderItems.product_id
Products.id > Reviews.product_id
Users.id > Reviews.user_id
